\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


This file contain the description of the movement of the holonomic robot.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}\label{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}} 
def {\bfseries go\+\_\+to\+\_\+point.\+clbk\+\_\+odom} (msg)
\item 
\mbox{\Hypertarget{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}\label{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}} 
def {\bfseries go\+\_\+to\+\_\+point.\+change\+\_\+state} (state)
\item 
\mbox{\Hypertarget{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}\label{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}} 
def {\bfseries go\+\_\+to\+\_\+point.\+normalize\+\_\+angle} (angle)
\item 
\mbox{\Hypertarget{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}\label{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}} 
def {\bfseries go\+\_\+to\+\_\+point.\+fix\+\_\+yaw} (des\+\_\+pos)
\item 
\mbox{\Hypertarget{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}\label{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}} 
def {\bfseries go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead} (des\+\_\+pos)
\item 
\mbox{\Hypertarget{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}\label{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}} 
def {\bfseries go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw} (des\+\_\+yaw)
\item 
\mbox{\Hypertarget{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}\label{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}} 
def {\bfseries go\+\_\+to\+\_\+point.\+done} ()
\item 
\mbox{\Hypertarget{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}\label{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}} 
def {\bfseries go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point} (goal)
\item 
def \mbox{\hyperlink{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}{go\+\_\+to\+\_\+point.\+main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}{go\+\_\+to\+\_\+point.\+position\+\_\+}} = Point()
\begin{DoxyCompactList}\small\item\em Service callback of the odometry subscriber. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a6d53ec90cd5e46f57f098363f19b2019}\label{go__to__point_8py_a6d53ec90cd5e46f57f098363f19b2019}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+} = 0
\item 
int \mbox{\hyperlink{go__to__point_8py_a4f01e0b11f73a96100c3fe8507f7585c}{go\+\_\+to\+\_\+point.\+state\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em Function to specify the state\+\_\+ value. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}\label{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}} 
{\bfseries go\+\_\+to\+\_\+point.\+pub\+\_\+} = None
\item 
\mbox{\Hypertarget{go__to__point_8py_aa37199112704385a13cf6684ce9f9aa1}\label{go__to__point_8py_aa37199112704385a13cf6684ce9f9aa1}} 
{\bfseries go\+\_\+to\+\_\+point.\+robot\+\_\+action\+\_\+server} = None
\item 
\mbox{\Hypertarget{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}\label{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+} = math.\+pi / 9
\item 
\mbox{\Hypertarget{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}\label{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+} = math.\+pi / 90
\item 
\mbox{\Hypertarget{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}\label{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}} 
float {\bfseries go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+} = 0.\+1
\item 
\mbox{\Hypertarget{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}\label{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+a} = -\/3.\+0
\item 
\mbox{\Hypertarget{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}\label{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+d} = 0.\+2
\item 
\mbox{\Hypertarget{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}\label{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}} 
float {\bfseries go\+\_\+to\+\_\+point.\+ub\+\_\+a} = 0.\+6
\item 
\mbox{\Hypertarget{go__to__point_8py_afecad4058844db05d8321199e25b4498}\label{go__to__point_8py_afecad4058844db05d8321199e25b4498}} 
float {\bfseries go\+\_\+to\+\_\+point.\+lb\+\_\+a} = -\/0.\+5
\item 
\mbox{\Hypertarget{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}\label{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}} 
float {\bfseries go\+\_\+to\+\_\+point.\+ub\+\_\+d} = 0.\+6
\item 
tuple {\bfseries go\+\_\+to\+\_\+point.\+quaternion}
\item 
\mbox{\Hypertarget{go__to__point_8py_a22ae82a27c7d4ec081aec5fae83837be}\label{go__to__point_8py_a22ae82a27c7d4ec081aec5fae83837be}} 
{\bfseries go\+\_\+to\+\_\+point.\+euler} = transformations.\+euler\+\_\+from\+\_\+quaternion(quaternion)
\item 
\mbox{\hyperlink{go__to__point_8py_a8980aeeb4c665434719cc9fef0268505}{go\+\_\+to\+\_\+point.\+angle}} = angle -\/ (2 $\ast$ math.\+pi $\ast$ angle) / (math.\+fabs(angle))
\begin{DoxyCompactList}\small\item\em Function to normalize an angle. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a87636e7b1ab1e9add019975eb7a5bcce}{go\+\_\+to\+\_\+point.\+err\+\_\+yaw}} = normalize\+\_\+angle(des\+\_\+yaw -\/ yaw\+\_\+)
\begin{DoxyCompactList}\small\item\em Turns the robot to reach the final desired yaw Args\+: des\+\_\+yaw (Point)\+: desired final yaw. \end{DoxyCompactList}\item 
\mbox{\hyperlink{go__to__point_8py_aaa0345cea167437ea6a05b02470bafe2}{go\+\_\+to\+\_\+point.\+twist\+\_\+msg}} = Twist()
\begin{DoxyCompactList}\small\item\em Stop the robot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a2fd68a76b8583598a4bceccdeae5d73b}\label{go__to__point_8py_a2fd68a76b8583598a4bceccdeae5d73b}} 
{\bfseries go\+\_\+to\+\_\+point.\+z}
\item 
\mbox{\Hypertarget{go__to__point_8py_a328c9a3bb9322f150f2e67371cd73306}\label{go__to__point_8py_a328c9a3bb9322f150f2e67371cd73306}} 
{\bfseries go\+\_\+to\+\_\+point.\+x}
\item 
\mbox{\hyperlink{go__to__point_8py_a803f37d88a98fcb432b07c5f1366d924}{go\+\_\+to\+\_\+point.\+desired\+\_\+position}} = Point()
\begin{DoxyCompactList}\small\item\em Set the appropriate behaviour depending on the current robot state, in orderd to reach the goal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_ac372e1a492f9aa66d29f365cc1c57d8c}\label{go__to__point_8py_ac372e1a492f9aa66d29f365cc1c57d8c}} 
{\bfseries go\+\_\+to\+\_\+point.\+y}
\item 
\mbox{\Hypertarget{go__to__point_8py_afb6f136299609da8342072667ac99fc3}\label{go__to__point_8py_afb6f136299609da8342072667ac99fc3}} 
{\bfseries go\+\_\+to\+\_\+point.\+des\+\_\+yaw} = goal.\+theta
\item 
\mbox{\Hypertarget{go__to__point_8py_aef2e9fd6df834ec234239da39481a0c7}\label{go__to__point_8py_aef2e9fd6df834ec234239da39481a0c7}} 
{\bfseries go\+\_\+to\+\_\+point.\+feedback} = rt2\+\_\+assignment1.\+msg.\+Rc\+Feedback()
\item 
\mbox{\Hypertarget{go__to__point_8py_a98ce19d0c843fd1cb438e6630ae107c2}\label{go__to__point_8py_a98ce19d0c843fd1cb438e6630ae107c2}} 
{\bfseries go\+\_\+to\+\_\+point.\+result} = rt2\+\_\+assignment1.\+msg.\+Rc\+Result()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contain the description of the movement of the holonomic robot. 

\begin{DoxyAuthor}{Author}
yeshwanth guru krishnakumar 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
21/02/2020
\end{DoxyDate}
\textbackslash{}\+Publisher\+: \textbackslash{}cmd\+\_\+vel

\textbackslash{}\+Subscriber\+: \textbackslash{}odom

\textbackslash{}\+Action Server\+: ~\newline
 \textbackslash{}go\+\_\+to\+\_\+point

This node define the movememnt of the holonomic robot 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}\label{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}} 
\index{go\_to\_point.py@{go\_to\_point.py}!main@{main}}
\index{main@{main}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}Main function to manage 
the robot behaviour

Including :
- the initialization of the *go_to_point*  node
- the publisher for the "\cmd_vel" topic
- the subscriber to the "\odom" topic
- the action server *\go_to_point*\end{DoxyVerb}
 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{go__to__point_8py_a8980aeeb4c665434719cc9fef0268505}\label{go__to__point_8py_a8980aeeb4c665434719cc9fef0268505}} 
\index{go\_to\_point.py@{go\_to\_point.py}!angle@{angle}}
\index{angle@{angle}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{angle}{angle}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+angle = angle -\/ (2 $\ast$ math.\+pi $\ast$ angle) / (math.\+fabs(angle))}



Function to normalize an angle. 

Args\+: angle (float)\+: angle to be normalized \mbox{\Hypertarget{go__to__point_8py_a803f37d88a98fcb432b07c5f1366d924}\label{go__to__point_8py_a803f37d88a98fcb432b07c5f1366d924}} 
\index{go\_to\_point.py@{go\_to\_point.py}!desired\_position@{desired\_position}}
\index{desired\_position@{desired\_position}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{desired\_position}{desired\_position}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+desired\+\_\+position = Point()}



Set the appropriate behaviour depending on the current robot state, in orderd to reach the goal. 

The state machine keeps running until the goal is reached or the action is preempted (the goal gets cancelled).

Args\+: goal (Pose\+Action\+Goal)\+: (x,y,theta) goal pose \mbox{\Hypertarget{go__to__point_8py_a87636e7b1ab1e9add019975eb7a5bcce}\label{go__to__point_8py_a87636e7b1ab1e9add019975eb7a5bcce}} 
\index{go\_to\_point.py@{go\_to\_point.py}!err\_yaw@{err\_yaw}}
\index{err\_yaw@{err\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{err\_yaw}{err\_yaw}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+err\+\_\+yaw = normalize\+\_\+angle(des\+\_\+yaw -\/ yaw\+\_\+)}



Turns the robot to reach the final desired yaw Args\+: des\+\_\+yaw (Point)\+: desired final yaw. 

\mbox{\Hypertarget{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}\label{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}} 
\index{go\_to\_point.py@{go\_to\_point.py}!position\_@{position\_}}
\index{position\_@{position\_}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{position\_}{position\_}}
{\footnotesize\ttfamily int go\+\_\+to\+\_\+point.\+position\+\_\+ = Point()}



Service callback of the odometry subscriber. 

\begin{DoxyVerb}Retrieve (x,y,z and theta) from the Odom message.
Args:
  msg (Odometry): odometry message.
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_af07d5616dcc86c42f73b6a21dda5f29f}\label{go__to__point_8py_af07d5616dcc86c42f73b6a21dda5f29f}} 
\index{go\_to\_point.py@{go\_to\_point.py}!quaternion@{quaternion}}
\index{quaternion@{quaternion}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{quaternion}{quaternion}}
{\footnotesize\ttfamily tuple go\+\_\+to\+\_\+point.\+quaternion}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  (}
\DoxyCodeLine{2         msg.pose.pose.orientation.x,}
\DoxyCodeLine{3         msg.pose.pose.orientation.y,}
\DoxyCodeLine{4         msg.pose.pose.orientation.z,}
\DoxyCodeLine{5         msg.pose.pose.orientation.w)}

\end{DoxyCode}
\mbox{\Hypertarget{go__to__point_8py_a4f01e0b11f73a96100c3fe8507f7585c}\label{go__to__point_8py_a4f01e0b11f73a96100c3fe8507f7585c}} 
\index{go\_to\_point.py@{go\_to\_point.py}!state\_@{state\_}}
\index{state\_@{state\_}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{state\_}{state\_}}
{\footnotesize\ttfamily int go\+\_\+to\+\_\+point.\+state\+\_\+ = 0}



Function to specify the state\+\_\+ value. 

Update the current global state Args\+: state (int)\+: new state \mbox{\Hypertarget{go__to__point_8py_aaa0345cea167437ea6a05b02470bafe2}\label{go__to__point_8py_aaa0345cea167437ea6a05b02470bafe2}} 
\index{go\_to\_point.py@{go\_to\_point.py}!twist\_msg@{twist\_msg}}
\index{twist\_msg@{twist\_msg}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{twist\_msg}{twist\_msg}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+twist\+\_\+msg = Twist()}



Stop the robot. 

Args\+: None Set the robot velocities to 0. 